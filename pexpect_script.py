import pexpect
password = "telindus4cg92"
SSH_NEWKEY = r'Are you sure you want to continue connecting \(yes/no\)\?'
adresse_ip = {
"HODSVP001" : "10.9.175.5",
"RFLSVP001" : "10.9.212.10",
"SALSVP001" : "10.9.180.10",
"QUASVP001" : "10.9.184.10", 
"EXTSVP001" : "10.9.176.10",
"AALSVP001"  : "10.9.128.5",
"ABOSVP001"  : "10.9.193.5",
"ACHSVP001" : "10.9.196.5",
"ALESVP001"  : "10.9.0.5",
"ALTSVP001"  : "10.9.190.5",
"AMOSVP001" : "10.9.5.5",
"APASVP001"  : "10.9.124.5",
"APCSVP001" : "10.9.159.5",
"APGSVP001" : "10.9.4.5",
"APHSVP001" : "10.9.19.5",
"AULSVP001" : "10.9.18.5",
"BBRSVP001" : "10.9.94.5",
"BFOSVP001" : "10.9.11.5",
"BHOSVP001" : "10.9.12.5",
"BKASVP001" : "10.9.158.5",
"BLCSVP001" : "10.9.40.5",
"BLESVP001" : "10.9.14.5",
"BNASVP001" : "10.9.7.5",
"BPESVP001" : "10.9.38.5",
"BPOSVP001" : "10.9.195.5",
"BPRSVP001" : "10.9.6.5",
"BRCSVP001" : "10.9.200.5",
"BRESVP001" : "10.9.63.5",
"BROSVP001" : "10.9.191.5",
"BTHSVP001" : "10.9.111.5",
"FPTSVP001" : "10.9.27.5",
"FROSVP001" : "10.9.64.5",
"GCASVP001" : "10.9.129.5",
"GLLSVP001" : "10.9.203.5",
"GMOSVP001" : "10.9.15.5",
"GQVSVP001" : "10.9.93.5",
"GTISVP001" : "10.9.69.5",
"GVBSVP001" : "10.9.90.5",
"HFASVP001" : "10.9.51.5",
"HMASVP001" : "10.9.17.5",
"IBRSVP001" : "10.9.35.5",
"IEBSVP001" : "10.9.66.5",
"IGUSVP001" : "10.9.34.5",
"ILHSVP001" : "10.9.96.5",
"IVESVP001" : "10.9.208.5",
"LBOSVP001" : "10.9.43.5",
"LBRSVP001" : "10.9.41.5",
"LCESVP001" : "10.9.116.5",
"LCOSVP001" : "10.9.206.5",
"LCVSVP001" : "10.9.37.5",
"LEUSVP001" : "10.9.80.5",
"LFFSVP001" : "10.9.97.5",
"LGLSVP001" : "10.9.20.5",
"LGSSVP001" : "10.9.57.5",
"LLESVP001" : "10.9.92.5",
"LLRSVP001" : "10.9.99.5",
"MAVSVP001" : "10.9.71.5",
"MCESVP001" : "10.9.123.5",
"MCHSVP001" : "10.9.188.5",
"MCOSVP001" : "10.9.42.5",
"MDOSVP001" : "10.9.44.5",
"MGASVP001" : "10.9.132.5",
"MGISVP001" : "10.9.110.5",
"MGTSVP001" : "10.9.68.5",
"MIVSVP001" : "10.9.74.5",
"MJASVP001" : "10.9.199.5",
"MJSSVP001" : "10.9.211.5",
"MLESVP001" : "10.9.45.5",
"MMISVP001" : "10.9.157.5",
"MSISVP001" : "10.9.16.5",
"MVASVP001" : "10.9.87.5",
"MVISVP001" : "10.9.8.5",
"MWISVP001" : "10.9.39.5",
"NCISVP001" : "10.9.122.5",
"NCPSVP001" : "10.9.194.5",
"NDESVP001" : "10.9.49.5",
"NFRSVP001" : "10.9.156.5",
"NLESVP001" : "10.9.46.5",
"NMDSVP001" : "10.9.148.10",
"NPISVP001" : "10.9.70.5",
"NPMSVP001" : "10.9.95.5",
"NRESVP001" : "10.9.82.5",
"OBASVP001" : "10.9.59.5",
"OGGSVP001" : "10.9.23.5",
"OLASVP001" : "10.9.86.5",
"OPBSVP001" : "10.9.24.5",
"OROSVP001" : "10.9.22.5",
"OVESVP001" : "10.9.104.10",
"OYMSVP001" : "10.9.201.5",
"PBLSVP001" : "10.9.72.5",
"PPASVP001" : "10.9.13.5",
"PPOSVP001" : "10.9.9.5",
"PPRSVP001" : "10.9.52.5",
"RCHSVP001" : "10.9.108.5",
"RRESVP001" : "10.9.75.5",
"SATSVP001" : "10.9.88.5",
"SBISVP001" : "10.9.83.5",
"SBOSVP001" : "10.9.207.5",
"SBSSVP001" : "10.9.209.5",
"SDASVP001" : "10.9.58.5",
"SDESVP001" : "10.9.54.5",
"SGESVP001" : "10.9.89.5",
"SLESVP001" : "10.9.56.5",
"SNASVP001" : "10.9.1.5",
"SRESVP001" : "10.9.140.5",
"SSJSVP001" : "10.9.76.5",
"SSTSVP001" : "10.9.135.5",
"UBRSVP001" : "10.9.62.5",
"UCLSVP001" : "10.9.81.5",
"UGUSVP001" : "10.9.26.5",
"USDSVP001" : "10.9.25.5",
"VBRSVP001" : "10.9.84.5",
"VCRSVP001" : "10.9.79.5",
"VCSSVP001" : "10.9.113.5",
"VETSVP001" : "10.9.127.5",
"VGASVP001" : "10.9.60.5",
"VMASVP001" : "10.9.61.5",
"YPASVP001" : "10.9.192.5",
}

for gw_name,ip in adresse_ip.iteritems():
    connexion = pexpect.spawn("ssh telindus_ro@" + ip )
    connexion.expect([pexpect.TIMEOUT, SSH_NEWKEY,'[Pp]assword: '])
    connexion.sendline('yes')
    connexion.expect('[Pp]assword: ')
    connexion.sendline(password + "\r")
    connexion.expect("#$")
    connexion.sendline("show tech unprivileged \r")
    connexion.expect("#$")
    resultat  = connexion.before
    with open('/Users/brur/Desktop/gw_cg92/'+gw_name +"_"+ip+'.txt','w') as fichier:
        fichier.write(resultat)

    connexion.close()



